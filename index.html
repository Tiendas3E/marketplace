<!-----

  
  
Project: Marketplace Starter (single-file preview)
Recommended folder structure (when splitting files):
/
  index.html
  /css
    styles.css
  /js
    app.js
  /data
    data.json
  /imgs
    logo.png
    profile.jpg
    1.webp 2.png ...

This single-file preview includes: header/navbar, responsive layout, RGB animated background, logo & profile, aside filters, products grid, simple cart (localStorage), and a P2P WebRTC starter placeholder.

  
  -----> 


  
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title> Cajero Pos ‚Äî Starter</title>
  <style>
    :root{
      --accent: 220 90% 56%; /* hsl as placeholder for rgb effects */
      --bg: #0f1724; --card:#0b1220; --muted:#94a3b8;
      --glass: rgba(255,255,255,0.04);
    }
    /* Reset-ish */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;color:#e6eef8;background:linear-gradient(180deg,#071029 0%, #081227 60%);}

    /* RGB animated header background */
    .rgb-bg{position:fixed;inset:0;z-index:-1;pointer-events:none;filter:blur(80px);opacity:.55}
    .rgb-circle{position:absolute;border-radius:50%;mix-blend-mode:screen;filter:blur(40px);}
    .rgb-circle.r{background:radial-gradient(circle at 20% 20%, rgba(255,0,80,0.95), rgba(255,0,80,0.0) 40%);} 
    .rgb-circle.g{background:radial-gradient(circle at 80% 40%, rgba(0,255,150,0.9), rgba(0,255,150,0) 40%);} 
    .rgb-circle.b{background:radial-gradient(circle at 50% 80%, rgba(60,120,255,0.9), rgba(60,120,255,0) 40%);} 

    /* Layout */
    .app{max-width:1200px;margin:36px auto;padding:18px}
    header{display:flex;align-items:center;gap:12px;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{width:48px;height:48px;object-fit:cover;border-radius:10px}
    .brand h1{font-size:18px}

    nav{display:flex;gap:12px;align-items:center}
    nav a{color:var(--muted);text-decoration:none;padding:8px 10px;border-radius:8px}
    nav a:hover{background:var(--glass);color:#fff}

    .profile{display:flex;align-items:center;gap:8px}
    .profile img{width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,0.06)}

    /* Main grid: aside + content */
    .main{display:grid;grid-template-columns:260px 1fr;gap:20px;margin-top:20px}
    aside{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    .filters h3{font-size:14px;margin-bottom:8px;color:var(--muted)}
    .filters input[type=text]{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit}
    .filters label{display:block;margin-top:12px;font-size:13px;color:var(--muted)}
    .filters .price{display:flex;gap:8px;align-items:center}

    /* Products grid */
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.025), rgba(255,255,255,0.02));padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;gap:8px}
    .card img{width:100%;aspect-ratio:4/3;object-fit:cover;border-radius:8px}
    .row{display:flex;justify-content:space-between;align-items:center}
    .price{font-weight:700}
    .muted{color:var(--muted);font-size:13px}
    .btn{background:linear-gradient(90deg, hsl(var(--accent) / 0.95), hsl(calc(var(--accent) - 30) / 0.9));padding:8px 10px;border-radius:10px;color:#021;cursor:pointer;border:none}

    /* Cart floating */
    .cart-btn{position:fixed;right:18px;bottom:18px;background:rgba(255,255,255,0.05);backdrop-filter:blur(6px);padding:12px;border-radius:999px;border:1px solid rgba(255,255,255,0.04)}

    /* Responsive */
    @media (max-width:880px){.main{grid-template-columns:1fr}aside{order:2}}
  </style>
</head>
<body>
  <div class="rgb-bg" aria-hidden>
    <div class="rgb-circle r" style="width:420px;height:420px;left:-80px;top:-40px;"></div>
    <div class="rgb-circle g" style="width:520px;height:520px;right:-120px;top:-80px;"></div>
    <div class="rgb-circle b" style="width:600px;height:600px;left:30%;bottom:-200px;"></div>
  </div>

  <div class="app">
    <header>
      <div class="brand">
        <img src="imgs/logo.png" alt="logo" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=48 height=48><rect width=48 height=48 fill=%230b1220 rx=10/></svg>'">
        <div>
          <h1>Huachu Marketplace</h1>
          <div class="muted">Productos por la banda</div>
        </div>
      </div>

      <nav>
        <a href="#">Inicio</a>
        <a href="#">Tienda</a>
        <a href="#">Nosotros</a>
        <a href="#">Contacto</a>
      </nav>

      <div class="profile">
        <button id="rgbToggle" class="btn" title="Toggle RGB">RGB</button>
        <img src="imgs/profile.jpg" alt="perfil" onerror="this.src='https://via.placeholder.com/40'">
      </div>
    </header>

    <main class="main">
      <aside>
        <div class="filters">
          <h3>Buscar</h3>
          <input id="q" type="text" placeholder="Buscar producto...">

          <label>Categor√≠a</label>
          <select id="cat" style="width:100%;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:inherit">
            <option value="">Todas</option>
            <option value="ropa">Ropa</option>
            <option value="accesorios">Accesorios</option>
            <option value="digital">Digital</option>
          </select>

          <label>Precio (max)</label>
          <div class="price">
            <input id="price" type="range" min="0" max="1000" value="1000" style="flex:1">
            <div id="priceVal" class="muted">$1000</div>
          </div>

          <label>Ordenar</label>
          <select id="sort" style="width:100%;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:inherit">
            <option value="new">M√°s nuevo</option>
            <option value="price-asc">Precio ‚Üë</option>
            <option value="price-desc">Precio ‚Üì</option>
          </select>

          <hr style="margin:12px 0;border:none;border-top:1px solid rgba(255,255,255,0.03)">

          <h3>P2P (prueba)</h3>
          <p class="muted" style="font-size:13px">Inicia una sesi√≥n P2P demo (WebRTC placeholder). Necesita HTTPS y permisos de c√°mara/mic.</p>
          <button id="startP2P" class="btn">Start P2P</button>
        </div>
      </aside>

      <section>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
          <h2>Productos</h2>
          <div class="muted">Mostrando <span id="count">0</span></div>
        </div>

        <div id="products" class="products">
          <!-- cards injected here -->
        </div>
      </section>
    </main>

    <button class="cart-btn" id="openCart">Carrito (<span id="cartCount">0</span>)</button>
  </div>


<div id="preview-modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);align-items:center;justify-content:center;">
  <div style="background:#fff;color:#000;border-radius:12px;padding:20px;max-width:600px;width:90%">
    <button onclick="closeModal()">Cerrar</button>
    <div id="modal-content"></div>
  </div>
</div>

  <script src="script/app.js"></script>

  <script>
    // --- Simple App logic ---
    const el = id => document.getElementById(id);

    // Sample fallback data if data.json not available
    const SAMPLE = [
      {id:1,nombre:'Playera blanca',precio:199,categoria:'ropa',imagen:'imgs/1.webp'},
      {id:2,nombre:'Gorra negra',precio:149,categoria:'accesorios',imagen:'imgs/2.png'},
      {id:3,nombre:'Arte digital',precio:599,categoria:'digital',imagen:'imgs/3.png'},
      {id:4,nombre:'Sticker pack',precio:49,categoria:'accesorios',imagen:'imgs/4.png'}
    ];

    let PRODUCTS = [];
    let CART = JSON.parse(localStorage.getItem('cart')||'{}');

    function fetchProducts(){
      return fetch('data/data.json').then(r=>r.json()).catch(()=>fetch('data.json').then(r=>r.json()).catch(()=>SAMPLE));
    }

    function render(){
      const q = el('q').value.toLowerCase();
      const cat = el('cat').value;
      const maxPrice = Number(el('price').value);
      const sort = el('sort').value;

      let list = PRODUCTS.filter(p=>p.precio<=maxPrice && (!cat||p.categoria===cat) && (p.nombre.toLowerCase().includes(q) || (p.descripcion||'').toLowerCase().includes(q)));

      if(sort==='price-asc') list.sort((a,b)=>a.precio-b.precio);
      if(sort==='price-desc') list.sort((a,b)=>b.precio-a.precio);

      const cont = el('products'); cont.innerHTML='';
      list.forEach(p=>{
        const card = document.createElement('div'); card.className='card';
        card.innerHTML = `
          <img src="${p.imagen}" alt="${p.nombre}" onerror="this.src='https://via.placeholder.com/400x300'">
          <div style=\"display:flex;justify-content:space-between;align-items:center\"> 
            <div>
              <div style=\"font-weight:600\">${p.nombre}</div>
              <div class=\"muted\">${p.categoria}</div>
            </div>
            <div class=\"price\">$${p.precio}</div>
          </div>
          <div class=\"row\">
            <button class=\"btn\" onclick=\"addToCart(${p.id})\">Agregar</button>
            <button class=\"muted\" onclick=\"alert('Detalle: ${p.nombre} ‚Äî demo')\">Ver</button>
          </div>
        `;
        cont.appendChild(card);
      });
      el('count').textContent = list.length;
      el('cartCount').textContent = Object.values(CART).reduce((s,n)=>s+n,0);
    }

    function addToCart(id){
      CART[id] = (CART[id]||0)+1;
      localStorage.setItem('cart', JSON.stringify(CART));
      el('cartCount').textContent = Object.values(CART).reduce((s,n)=>s+n,0);
    }

    // init
    (async()=>{
      PRODUCTS = await fetchProducts();
      // ensure numeric prices
      PRODUCTS = PRODUCTS.map(p=>({precio: Number(p.precio||0),categoria:p.categoria||'',...p}));
      render();
    })();

    // ui bindings
    ['q','cat','price','sort'].forEach(id=>el(id).addEventListener('input',() => { if(id==='price') el('priceVal').textContent = '$'+el('price').value; render(); }));

    el('rgbToggle').addEventListener('click', ()=>document.querySelector('.rgb-bg').style.display = document.querySelector('.rgb-bg').style.display === 'none' ? 'block' : 'none');

    // P2P placeholder: simple WebRTC starter
    el('startP2P').addEventListener('click', async ()=>{
      alert('P2P demo: esto es un placeholder. Para P2P real necesitas signaling server (WebSocket) y HTTPS).\nRevisa la consola para c√≥digo WebRTC de ejemplo.');
      console.log('--- P2P starter: Get user media + create RTCPeerConnection ---');
      try{
        const stream = await navigator.mediaDevices.getUserMedia({audio:true,video:true});
        console.log('Got local stream', stream);
        // Show local preview in a popup window or element (not implemented here)
        // To actually connect P2P you need a signaling channel to exchange sdp/ice.
      }catch(e){console.error('Error P2P',e);}
    });

    el('openCart').addEventListener('click', ()=>{
      const items = Object.keys(CART).map(id=>{
        const p = PRODUCTS.find(x=>x.id==id) || {nombre:'Unknown',precio:0};
        return `${p.nombre} x ${CART[id]} ‚Äî $${p.precio* CART[id]}`;
      });
      alert(items.length?items.join('\n'):'Carrito vac√≠o');
    });
  </script>
</body>
</html>



<!----
1. **Autenticaci√≥n (auth)**
2. **Base de datos local o ligera (SQLite o IndexedDB)**
3. **Integraci√≥n entre secciones**: carrito, productos, inventarios, etc.
4. **Men√∫ unificado con todos tus subdominios o p√°ginas** (`.vercel.app`, `.github.io`, etc.)

Vamos a organizarlo por partes, para que no te abrumes:

---

### 1. Sobre el **auth** y SQLite

Tu c√≥digo actual es *cliente puro* (todo en el navegador).
Ni `portal_with_cart.html` ni `market.html` pueden conectar directamente a SQLite porque eso requiere un entorno de servidor (como Node.js, Python, o un backend tipo Supabase, Firebase, etc.).

Si lo que quieres es **guardar datos localmente**, las opciones son:

* **localStorage** (lo que ya usas para el carrito)
* **IndexedDB** (una mini base de datos en el navegador; soporta tablas, √≠ndices, etc.)
* O un **archivo JSON remoto (en GitHub o Vercel)** para lectura (solo lectura, no escritura).

Entonces:
üëâ Si no vas a usar servidor, **SQLite no es viable directamente**.
Puedo adaptarte tu portal para usar **IndexedDB** con una capa sencilla de CRUD para productos, usuarios y pedidos.
¬øQuieres que te lo implemente as√≠?

---

### 2. Sobre los `<aside>` y los ‚Äúpaneles‚Äù

En `portal_with_cart.html` tienes dos asides:

* `#filtros` (izquierdo)
* `#carrito` (derecho)

Son paneles separados: uno para navegaci√≥n/filtros y otro para el carrito.
Esto est√° bien; no lo elimines.
Cuando agreguemos autenticaci√≥n o base de datos, podr√≠amos a√±adir un **tercer aside** tipo ‚ÄúPanel del usuario‚Äù con datos del login, pedidos, o configuraci√≥n.

---

### 3. Sobre los links y la estructura global

Tienes much√≠simas p√°ginas, as√≠ que te propongo este **men√∫ JSON de portales**, que luego tu `market.html` puede leer para crear autom√°ticamente el `<nav>`:

```json
{
  "empresas": [
    {"nombre": "Bious IA", "url": "https://bious-ia.vercel.app/"},
    {"nombre": "Bious Market", "url": "https://bious-market.vercel.app/home"},
    {"nombre": "Huachu Pets", "url": "https://huachu-pets.vercel.app/"},
  ]
}
```

Y en tu JS podr√≠as tener:

```js
fetch('data/links.json')
  .then(r=>r.json())
  .then(data=>{
    const nav = document.getElementById('navlinks');
    data.empresas.forEach(e=>{
      const a = document.createElement('a');
      a.href = e.url;
      a.textContent = e.nombre;
      a.target = '_blank';
      nav.appendChild(a);
    });
  });
```

Esto unifica todo sin tener que escribir `<a>` uno por uno.

---

### 4. Sobre las ‚Äúventanas‚Äù o vistas previas

Lo que mencionas de ‚Äúventanitas‚Äù sin salir del portal se puede hacer con:

* **Modales (`<dialog>` o `div` flotantes)** con JS.
* **`iframe` flotante** si quieres mostrar otra p√°gina (por ejemplo `huachu-pets.vercel.app`) embebida.

Ejemplo simple de modal reutilizable:

```html
<div id="preview-modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);align-items:center;justify-content:center;">
  <div style="background:#fff;color:#000;border-radius:12px;padding:20px;max-width:600px;width:90%">
    <button onclick="closeModal()">Cerrar</button>
    <div id="modal-content"></div>
  </div>
</div>

<script>
function openPreview(html){
  document.getElementById('modal-content').innerHTML = html;
  document.getElementById('preview-modal').style.display='flex';
}
function closeModal(){
  document.getElementById('preview-modal').style.display='none';
}
</script>
```

Luego puedes llamarlo as√≠ desde cualquier producto:

```js
openPreview(`<h3>${p.title}</h3><p>${p.description}</p>`);
```

---






<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistema de Punto de Venta</title>
  <link rel="stylesheet" href="styles_system.css" />
</head>
<body>
  <header>
    <h1>Sistema de Punto de Venta</h1>
    <nav>
      <button onclick="location.href='index.html'">Inicio</button>
      <button onclick="location.href='admin.html'">Admin</button>
      <button onclick="location.href='auditor.html'">Auditor</button>
      <button onclick="location.href='reports.html'">Reportes</button>
    </nav>
  </header>

  <main id="pos-app">
    <section id="search">
      <input type="text" id="searchInput" placeholder="Buscar producto..." />
      <button id="clearSearch">Limpiar</button>
    </section>

    <section id="productList"></section>

    <section id="cart">
      <h2>Carrito</h2>
      <table id="cartTable">
        <thead>
          <tr><th>Producto</th><th>Cant.</th><th>Precio</th><th>Subtotal</th><th></th></tr>
        </thead>
        <tbody></tbody>
      </table>
      <div id="cartSummary">
        <p><b>Total:</b> <span id="totalDisplay">$0.00</span></p>
        <input id="amountReceived" placeholder="Monto recibido" type="number" />
        <button id="checkoutBtn">Cobrar</button>
        <p id="changeDisplay"></p>
      </div>
    </section>

    <section id="ticket">
      <h3>Ticket</h3>
      <pre id="receipt"></pre>
    </section>
  </main>

  <! -- ‚ö†Ô∏è ORDEN CR√çTICO - DEBE SER EXACTAMENTE AS√ç -->
  <script src="auth.js"></script>
  <script src="storage-utils.js"></script>
  <script src="accounting.js"></script>  <!-- ¬°ESTE ES IMPORTANTE! -->
  <script src="pos.js"></script>
</body>
</html>

<!-----
  index_pos.html
admin.html
auditor.html
reports.html

styles_system.css

storage-utils.js
accounting.js
pos.js
app_admin.js
app_auditor.js
auth.js


---

ü™∂ Parte 2 ‚Äî HTML principal del Punto de Venta (index_pos.html)

Copia este contenido (funcional y limpio, carga todo por fetch('inventario.json')):
------- >
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistema de Punto de Venta</title>
  <link rel="stylesheet" href="styles_system.css" />
<style>

body {
  font-family: "Segoe UI", Arial, sans-serif;
  margin: 1rem;
  background: #f7f9fb;
  color: #333;
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #004aad;
  color: white;
  padding: 10px 20px;
  border-radius: 8px;
}

nav button {
  margin: 0 5px;
  padding: 6px 10px;
  border: none;
  background: #fff;
  color: #004aad;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
}
nav button:hover { background: #d0e2ff; }

#search { margin-top: 1rem; }
#search input { padding: 6px; width: 200px; }

#productList {
  display: flex;
  flex-wrap: wrap;
  margin-top: 1rem;
  gap: 0.5rem;
}

.product-card {
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 8px;
  width: 200px;
  background: white;
  cursor: pointer;
}

#cart { margin-top: 1.5rem; background: #fff; padding: 1rem; border-radius: 8px; }
#cartTable { width: 100%; border-collapse: collapse; }
#cartTable th, #cartTable td { border-bottom: 1px solid #ccc; padding: 4px; }

#cartSummary { margin-top: 1rem; }
#cartSummary input { width: 100px; padding: 4px; }

#ticket { margin-top: 1rem; background: #fff; padding: 1rem; border-radius: 8px; }
pre { background: #f2f2f2; padding: 1rem; border-radius: 8px; }
</style>
</head>
<body>
  <header>
    <h1>Sistema de Punto de Venta</h1>
    <nav>
      <button onclick="location.href='admin.html'">Admin</button>
      <button onclick="location.href='auditor.html'">Auditor</button>
      <button onclick="location.href='reports.html'">Reportes</button>
    </nav>
  </header>

  <main id="pos-app">
    <section id="search">
      <input type="text" id="searchInput" placeholder="Buscar producto..." />
      <button id="clearSearch">Limpiar</button>
    </section>

    <section id="productList"></section>

    <section id="cart">
      <h2>Carrito</h2>
      <table id="cartTable">
        <thead>
          <tr><th>Producto</th><th>Cant.</th><th>Precio</th><th>Subtotal</th><th></th></tr>
        </thead>
        <tbody></tbody>
      </table>
      <div id="cartSummary">
        <p><b>Total:</b> <span id="totalDisplay">$0.00</span></p>
        <input id="amountReceived" placeholder="Monto recibido" type="number" />
        <button id="checkoutBtn">Cobrar</button>
        <p id="changeDisplay"></p>
      </div>
    </section>

    <section id="ticket">
      <h3>Ticket</h3>
      <pre id="receipt"></pre>
    </section>
  </main>

  <script src="auth.js"></script>
  <script src="storage-utils.js"></script>
  <script src="accounting.js"></script>
  <script src="pos.js"></script>
</body>
</html>




<!-------
  
<!-- Don't use this -- >
<script src="https://raw.githubusercontent.com/ozclef/sistem-shop/main/pos.js"></script>

<!-- Use this instead -- >
<script src="https://ozclef.github.io/sistem-shop/pos.js"></script>

storage-utils.js - Inventory management core:

loadInventory() - Fetches inventario.json using fetch()

updateInventory() - PATCH requests to update stock

saveTransaction() - POST new sales to transaction history

pos.js - Point of sale functionality:

Cart management (add/remove items, calculate totals)

Checkout process with change calculation

Receipt generation

Search and product filtering

accounting.js - Financial operations:

Daily closing calculations (X and Z reports)

Payment reconciliation

Tax calculations and financial reporting

üí° Alternative CDN Options
If you need to reference external libraries or want additional hosting options:

jsDelivr: A free CDN that can serve files from GitHub repositories

html
<script src="https://cdn.jsdelivr.net/gh/ozclef/sistem-shop@main/pos.js"></script>
üìö Learning from Similar Projects
--------

javascript

üöÄ Parte 7 ‚Äî Inicializar el sistema
Ahora solo necesitas crear el archivo inventario.json en la misma carpeta:

json
[
  {
    "id": 1,
    "codigo": "PROD001",
    "nombre": "Laptop Gamer",
    "precio": 15000,
    "stock": 10,
    "categoria": "Tecnolog√≠a"
  },
  {
    "id": 2,
    "codigo": "PROD002", 
    "nombre": "Mouse Inal√°mbrico",
    "precio": 450,
    "stock": 25,
    "categoria": "Tecnolog√≠a"
  },
  {
    "id": 3,
    "codigo": "PROD003",
    "nombre": "Teclado Mec√°nico",
    "precio": 1200,
    "stock": 15,
    "categoria": "Tecnolog√≠a"
  }
]


Este c√≥digo crea una p√°gina de inicio con un men√∫ de tarjetas que enlazan a las diferentes secciones. Cada tarjeta tiene un t√≠tulo, un icono y una descripci√≥n. Adem√°s, he a√±adido un footer simple.

Nota: Aseg√∫rate de que los archivos HTML a los que enlazas (admin.html, auditor.html, etc.) existan en tu proyecto. Si no, puedes crearlos m√°s adelante.

Si necesitas que te ayude con el contenido de alguna de esas p√°ginas (como admin.html, auditor.html, etc.), h√°zmelo saber y procedemos paso a paso.

¬øQuieres que continuemos con alguna p√°gina en particular?

¬°Perfecto! Te entiendo completamente. Vamos a crear un men√∫ principal bien organizado con cards para cada m√≥dulo del sistema. Aqu√≠ est√° el HTML completo:

üè† Parte 8 ‚Äî index.html (Men√∫ Principal con Cards)
html
